---
title: 쿠키와 세션 그리고 토큰 ?
description: 간단하게 알아보는 쿠키,세션 그리고 토큰
date: 2023-09-20
tags:
  - 네트워크
image: /img/network/cookie-session-token.jpg
---

**쿠키, 세션, 토큰은 왜 등장했을까 🤦‍♂️**<br></br>
쿠키, 세션 및 토큰은 웹 애플리케이션에서 사용자 인증과 상태 관리를 위해 등장한 개념들이다. HTTP 프로토콜의 Connectionless 및 Stateless한 특성을 보완하기 위해 도입되었다. <br></br>

* Connectionless (무연결성): HTTP는 클라이언트가 서버에 요청을 보내고 서버가 응답을 보낸 후 연결을 즉시 끊는 특성을 가지고 있다. 이것은 클라이언트와 서버 간의 상태를 유지하지 않고, 각 요청과 응답을 독립적으로 처리하는 것을 의미한다.

* Stateless (무상태성): 또한 HTTP는 무상태 프로토콜로서 클라이언트와 서버 간의 각 요청과 응답이 이전 요청과 응답과 독립적으로 처리된다. 이전 요청에서 생성된 정보나 상태는 서버에 의해 유지되지 않는다.

<u>사용자 인증 정보나 상태를 유지하기 위해 쿠키, 세션, 토큰과 같은 것들이 등장하게 되었다.</u><br></br>
<br></br>


# 쿠키 (Cookie)
* 쿠키는 웹 브라우저에서 사용자의 컴퓨터에 저장되는 작은 데이터 조각이다.
* 쿠키는 key-value 형태로 웹 브라우저의 쿠키 저장소에 저장한다.
* 브라우저는 이 문자열 데이터 조각들을 저장해놓았다가 동일한 서버에 재요청시 쿠키 데이터를 전송할 수 있다.
* 브라우저를 종료해도 쿠키는 유지된다.

## 쿠키 동작 방식
<p align="center">
  <img src="/img/network/cookie.jpg" width="700"/>
</p>
<br></br>

## 쿠키 단점
* 저장의 한계가 있다(하나의 쿠기 값은 4KB까지 저장 가능)
* 보안에 취약
* 브라우저마다 쿠키에 대한 지원 형태가 다르다.


# 세션 (Session)
* 세션 id만 쿠키로 저장하고 상태 데이터들을 서버에 저장
* 쿠키보다는 보안성이 높지만 세션 정보도 중간에 탈취 당할 수 있기 때문에 보안이 완벽하진 않다.
* 서버에 저장하기 때문에 서버의 부하가 늘어나고 상대적으로 속도가 느리다.

## 세션 동작 방식
* 클라이언트가 서버에 접속 시 세션 ID 를 발급한다.
* 클라이언트는 세션 ID 에 대해 쿠키를 사용해서 정보를 저장한다.
* 클라이언트가 서버에 다시 접속시 쿠키를 이용해서 세션 ID 값을 서버에 전달한다.
<br></br>

## 세션 단점
* 서버에 상태를 저장하고 유지하므로 동시 접속자 수가 많은 서비스일 경우 서버 부하가 심하다.
* 보안에 취약하다(세션 하이재킹)

## 쿠키와 세션을 사용한 로그인
<p align="center">
  <img src="/img/network/login.jpg" width="700"/>
</p>
<br></br>

# 토큰 (Token)
* 클라이언트가 서버에 접속을 하면 서버에서 인증되었다는 의미로 토큰을 부여한다.
* 토큰은 보통 로컬스토리지나 쿠키에 저장한다.
* 받은 토큰을 HTTP 요청의 헤더에 넣어 서버에 전달한다.
* 클라이언트에서 보낸 토큰을 서버에서 유효성 검사를 한다.

## 토큰 동작 방식
<p align="center">
  <img src="/img/network/token.jpg" width="700"/>
</p>

## 토큰 단점
* 토큰은 일반적으로 크기가 크기 때문에 저장 공간을 많이 차지하낟.
* 토큰을 탈취당하면 대처하기 어렵다.

## 왜 토큰방식?
1. 웹에는 쿠키와 세션이 있지만 앱에서는 쿠키와 세션이 없다.
2. 상태를 유지하지 않으므로 Stateless 한 특징을 가지고 있다.
3. 보안성을 높일 수 있다.(JWT, Oauth)

> 출처 <br></br>
> https://jjongins.tistory.com/25<br></br>
> https://ddukbaegi.tistory.com/123<br></br>
> https://victorydntmd.tistory.com/286<br></br>
> https://inpa.tistory.com/entry/WEB-%F0%9F%93%9A-JWTjson-web-token-%EB%9E%80-%F0%9F%92%AF-%EC%A0%95%EB%A6%AC